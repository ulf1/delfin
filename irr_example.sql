USE `testdb`;

DROP TEMPORARY TABLE IF EXISTS __tmp_tbl_irrcashflows__ ;

CREATE TEMPORARY TABLE __tmp_tbl_irrcashflows__ (d DOUBLE, v DOUBLE);

INSERT INTO __tmp_tbl_irrcashflows__(d,v) VALUES 
(-3.6082191780821917, -6650000),
(-3.0164383561643837, 494744.72),
(-2.767123287671233, 239868.47),
(-2.5179953589340522, 253346.41),
(-2.2693614791526313, 244381.46),
(-2.1710008234149263, -565000),
(-2.0207275993712104, 261032.18),
(-1.7693614791526313, 266169.94),
(-1.558904109589041, -735000),
(-1.5232876712328767, 539531.25),
(-1.5178082191780822, 195162.33),
(-1.2712328767123289, 248730.21),
(-1.1095890410958904, 2310750),
(-1.021917808219178, 81994.13),
(-0.7698630136986302, 162068.66),
(-0.5205479452054794, 122593.12),
(-0.273972602739726, 311434.12),
(-0.024657534246575342, 163776.55),
(0, 3700000);

-- expected: 0.085763
SET @maxiter := 500;
SET @toleps := 1e-8;

SELECT irr_bisection(@maxiter, @toleps) as irr_bis, 
irr_newton(@maxiter, @toleps) as irr_nwt, 
irr_secand(@maxiter, @toleps) as irr_sec
;

